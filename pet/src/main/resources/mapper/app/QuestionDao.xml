<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.chaoku.modules.app.dao.QuestionDao">

	<!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="com.chaoku.modules.app.entity.QuestionEntity" id="questionMap">
        <result property="id" column="id"/>
        <result property="title" column="title"/>
        <result property="optionA" column="option_a"/>
        <result property="optionB" column="option_b"/>
        <result property="optionC" column="option_c"/>
        <result property="optionD" column="option_d"/>
        <result property="answer" column="answer"/>
        <result property="version" column="version"/>
        <result property="creator" column="creator"/>
        <result property="createDate" column="create_date"/>
        <result property="updater" column="updater"/>
        <result property="updateDate" column="update_date"/>
        <result property="delFlag" column="del_flag"/>
    </resultMap>
    <select id="getRandomQuestion" resultType="com.chaoku.modules.app.entity.QuestionEntity" parameterType="integer">
        SELECT t1.id,t1.title,t1.option_a,t1.option_b,t1.option_c,t1.option_d,t1.answer,t1.version,t1.creator,t1.create_date,t1.updater,t1.update_date,t1.del_flag
        FROM tb_question t1
            JOIN (
                SELECT ROUND(RAND() * ((
                        SELECT MAX(id)
                        FROM tb_question
                    ) - (
                        SELECT MIN(id)
                        FROM tb_question
                    )) + (
                        SELECT MIN(id)
                        FROM tb_question
                    )) AS id
            ) t2
        WHERE t1.id >= t2.id
        ORDER BY t1.id
        LIMIT #{num};
    </select>


</mapper>